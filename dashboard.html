<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Automatizaciones - Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Dashboard-specific styles */
        .dashboard-layout {
            display: flex;
            min-height: 100vh;
            background: var(--color-background);
        }

        .dashboard-sidebar {
            width: 260px;
            background: var(--color-surface);
            border-right: 1px solid var(--color-border);
            padding: 1.5rem;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }

        .dashboard-main {
            flex: 1;
            margin-left: 260px;
            padding: 2rem;
        }

        .dashboard-header {
            background: var(--color-surface);
            border-bottom: 1px solid var(--color-border);
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            margin: -2rem -2rem 2rem -2rem;
        }

        .sidebar-logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: 2rem;
        }

        .sidebar-nav {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .sidebar-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            border-radius: var(--radius-md);
            color: var(--color-text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
        }

        .sidebar-item:hover {
            background: var(--color-surface-elevated);
            color: var(--color-text);
        }

        .sidebar-item.active {
            background: var(--color-primary);
            color: white;
        }

        .sidebar-icon {
            width: 20px;
            height: 20px;
        }

        .dashboard-controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
        }

        .search-box {
            flex: 1;
            min-width: 250px;
            max-width: 400px;
        }

        .view-toggle {
            display: flex;
            gap: 0.5rem;
            background: var(--color-surface);
            padding: 0.25rem;
            border-radius: var(--radius-md);
        }

        .view-toggle-btn {
            padding: 0.5rem 1rem;
            border: none;
            background: transparent;
            color: var(--color-text-secondary);
            cursor: pointer;
            border-radius: var(--radius-sm);
            transition: all 0.2s;
        }

        .view-toggle-btn.active {
            background: var(--color-primary);
            color: white;
        }

        .data-table {
            width: 100%;
            background: var(--color-surface);
            border-radius: var(--radius-lg);
            overflow: hidden;
            border: 1px solid var(--color-border);
        }

        .data-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th {
            background: var(--color-surface-elevated);
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            color: var(--color-text);
            border-bottom: 1px solid var(--color-border);
        }

        .data-table td {
            padding: 1rem;
            border-bottom: 1px solid var(--color-border);
            color: var(--color-text-secondary);
        }

        .data-table tr:last-child td {
            border-bottom: none;
        }

        .data-table tr:hover {
            background: var(--color-surface-elevated);
        }

        .status-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .status-pending {
            background: rgba(251, 191, 36, 0.1);
            color: #fbbf24;
        }

        .status-reviewed {
            background: rgba(59, 130, 246, 0.1);
            color: #3b82f6;
        }

        .status-approved {
            background: rgba(16, 185, 129, 0.1);
            color: #10b981;
        }

        .action-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .action-btn {
            padding: 0.5rem;
            border: none;
            background: transparent;
            color: var(--color-text-secondary);
            cursor: pointer;
            border-radius: var(--radius-sm);
            transition: all 0.2s;
        }

        .action-btn:hover {
            background: var(--color-surface-elevated);
            color: var(--color-primary);
        }

        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
        }

        .automation-card {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            transition: all 0.2s;
        }

        .automation-card:hover {
            border-color: var(--color-primary);
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.1);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 1rem;
        }

        .card-title {
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--color-text);
        }

        .card-meta {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-bottom: 1rem;
            font-size: 0.875rem;
            color: var(--color-text-secondary);
        }

        .card-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--color-border);
        }

        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: var(--color-text-secondary);
        }

        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        @media (max-width: 768px) {
            .dashboard-sidebar {
                width: 100%;
                position: relative;
                height: auto;
            }

            .dashboard-main {
                margin-left: 0;
            }

            .dashboard-controls {
                flex-direction: column;
                align-items: stretch;
            }

            .search-box {
                max-width: 100%;
            }

            .cards-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-layout">
         Sidebar 
        <aside class="dashboard-sidebar">
            <div class="sidebar-logo">AutoFlow Admin</div>
            <nav class="sidebar-nav">
                <a href="#" class="sidebar-item active" data-view="general">
                    <svg class="sidebar-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                    </svg>
                    <span>Vista general</span>
                </a>
                <a href="#" class="sidebar-item" data-view="nodes">
                    <svg class="sidebar-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" />
                    </svg>
                    <span>Vista en nodos</span>
                </a>
                <a href="#" class="sidebar-item" data-view="export">
                    <svg class="sidebar-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                    </svg>
                    <span>Exportar datos</span>
                </a>
                <a href="#" class="sidebar-item" data-view="settings">
                    <svg class="sidebar-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                    <span>Configuración</span>
                </a>
            </nav>
        </aside>

         Main Content 
        <main class="dashboard-main">
            <div class="dashboard-header">
                <h1 style="font-size: 1.5rem; font-weight: 700; color: var(--color-text);">Automatizaciones recibidas</h1>
                <button class="btn-secondary" id="logoutBtn">Cerrar sesión</button>
            </div>

             Controls 
            <div class="dashboard-controls">
                <div class="search-box">
                    <input type="text" id="searchInput" class="form-input" placeholder="Buscar por nombre o empresa...">
                </div>
                <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                    <button class="btn-secondary" id="exportCsvBtn">Exportar CSV</button>
                    <button class="btn-secondary" id="exportJsonBtn">Generar JSON</button>
                    <button class="btn-primary" id="viewNodesBtn">Ver en nodos</button>
                </div>
                <div class="view-toggle">
                    <button class="view-toggle-btn active" data-view-type="table">Tabla</button>
                    <button class="view-toggle-btn" data-view-type="cards">Cards</button>
                </div>
            </div>

             Table View 
            <div id="tableView" class="data-table">
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Empresa / Usuario</th>
                            <th>Tipo</th>
                            <th>Fecha</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                         Data will be inserted here 
                    </tbody>
                </table>
            </div>

             Cards View 
            <div id="cardsView" class="cards-grid" style="display: none;">
                 Cards will be inserted here 
            </div>

             Empty State 
            <div id="emptyState" class="empty-state" style="display: none;">
                <div class="empty-state-icon">📋</div>
                <h3 style="font-size: 1.25rem; margin-bottom: 0.5rem; color: var(--color-text);">No hay automatizaciones</h3>
                <p>Las automatizaciones enviadas desde el formulario aparecerán aquí.</p>
            </div>
        </main>
    </div>

     Modal de Vista de Nodos 
    <div id="nodeMapModal" class="modal">
        <div class="modal-content modal-fullscreen">
            <div class="modal-header">
                <h3>Mapa de Nodos - Todas las Automatizaciones</h3>
                <button class="modal-close" id="closeNodeMap">&times;</button>
            </div>
            <div class="modal-body">
                <div class="node-map-controls">
                    <div class="legend">
                        <div class="legend-item">
                            <span class="legend-color" style="background: #10b981;"></span>
                            <span>Aprobado</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color" style="background: #3b82f6;"></span>
                            <span>Revisado</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color" style="background: #fbbf24;"></span>
                            <span>Pendiente</span>
                        </div>
                    </div>
                    <div style="display: flex; gap: 0.5rem;">
                        <button class="btn-secondary btn-icon" id="zoomInBtn" title="Acercar">+</button>
                        <button class="btn-secondary btn-icon" id="zoomOutBtn" title="Alejar">−</button>
                        <button class="btn-secondary" id="resetZoomBtn">Resetear Vista</button>
                    </div>
                </div>
                <canvas id="nodeCanvas"></canvas>
            </div>
        </div>
    </div>

     Modal de Detalles 
    <div id="detailsModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>Detalles de la Automatización</h3>
                <button class="modal-close" id="closeDetails">&times;</button>
            </div>
            <div class="modal-body">
                <div id="detailsContent"></div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="closeDetailsBtn">Cerrar</button>
            </div>
        </div>
    </div>

    <script src="dashboard.js"></script>
</body>
</html>
